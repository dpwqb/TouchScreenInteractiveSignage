<!DOCTYPE html>
<html lang="zh-CN">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<title>Ethos-video</title>
	<script src="./js/tailwindcss.js"></script>
	<script src="./js/swiper-element-bundle.min.js"></script>
	<style>
		@font-face {
			font-family: 'SHBreeHeadlineGlobal';
			src: url('./Fonts/sh-bree-headlineglobal-regular.ttf') format('truetype');
		}
	</style>
	<script>
		tailwind.config = {
			theme: {
				extend: {
					colors: {
						primary: '#4a6fa5',
						secondary: '#e67e22',
					}
				}
			}
		}
	</script>
	<style type="text/tailwindcss">
		@layer utilities {
            .home-container {
                position: relative;
                width: 100%;
                height: 100vh;
                overflow: hidden;
                touch-action: pan-x pan-y;
                background-size: cover;
                background-position: center;
            }
            /* Swiper 容器样式 */
            swiper-container {
                width: 100%;
                height: 100vh;
                position: absolute;
                top: 0;
                left: 0;
                z-index: 1;
            }
            /* Swiper 幻灯片样式 */
            swiper-slide {
                position: relative;
                width: 100%;
                height: 100vh;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }
            /* 首页标题样式 */
            .home-title {
                font-family: 'SHBreeHeadlineGlobal', sans-serif;
                font-size: clamp(3rem, 6vw, 8rem);
                font-weight: bold;
                color: #EC6600;
                /* 标题居中显示 */
                position: absolute;
                top: 15%;
                left: 50%;
                transform: translateX(-50%);
                text-align: center;
				width: 1300px;
            }
            /* 右侧按钮容器：垂直居中排列 */
            .button-container {
                position: absolute;
                right: clamp(20px, 5vw, 50px); /* 右侧距离自适应 */
                top: 50%; /* 垂直居中基准点 */
                transform: translateY(-50%); /* 向上偏移自身50%，实现完美居中 */
                display: flex;
                flex-direction: column; /* 纵向排列按钮 */
                gap: clamp(15px, 3vw, 30px); /* 按钮间垂直间距自适应 */
                max-width: 300px; /* 限制最大宽度 */
            }
            /* 功能按钮样式 */
            .function-button {
                width: clamp(120px, 20vw, 250px); /* 按钮宽度自适应 */
                height: clamp(120px, 20vw, 250px); /* 按钮高度自适应 */
                cursor: pointer;
                opacity: 0.85;
                transition: all 0.3s ease;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .function-button:hover {
                opacity: 1;
                transform: scale(1.05); /* 触摸反馈：轻微放大 */
            }
            .function-button img {
                width: 100%;
                height: 100%;
                object-fit: contain; 
            }

            .nav-button {
                position: absolute;
                z-index: 20;
                cursor: pointer;
                opacity: 0.9;
                transition: opacity 0.1s;
            }
            .nav-button:hover {
                opacity: 1;
            }
            .nav-button.logo {
                right: 50px;
                top: 50px;
                width: clamp(128px, 16vw, 512px);
                height: auto;
            }
            .back-button {
                right: 50px;
                bottom: 50px;
                width: clamp(64px, 8vw, 256px);
                height: clamp(64px, 8vw, 256px);
                top: auto;
            }

            /* 中心视频样式 */
            .center-video {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                z-index: 2;
                width: 100%;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .product-video {
                width: 100%;
                object-fit: cover;
            }
            
            /* 播放按钮样式 */
            .play-button {
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                z-index: 3;
                width: 100px;
                height: 100px;
                cursor: pointer;
                transition: opacity 0.3s;
            }
            
            /* 翻页按钮样式 */
            .page-button {
                position: absolute;
                width: clamp(32px, 6vw, 150px);
                height: clamp(32px, 6vw, 150px);
                top: 68%;
                transform: translateY(-50%);
                z-index: 20;
                cursor: pointer;
                opacity: 0.8;
                transition: opacity 0.3s;
            }
            .page-button:hover {
                opacity: 1;
            }
            .left-button {
                left: 20px;
            }
            .right-button {
                right: 20px;
            }
            .right-button img {
                transform: scaleX(-1);
            }
        }
    </style>
</head>

<body class="bg-black">
	<div class="home-container" style="background-image: url('./img/bg/big.jpg')">
		<div class="nav-button logo">
			<img src="./img/logo.svg" alt="Logo" class="w-full h-full object-contain">
		</div>

		<!-- 返回按钮 -->
		<div class="nav-button back-button" onclick="window.location.href='./index.html'">
			<img src="./img/back.svg" alt="返回首页" class="w-full h-full object-contain">
		</div>

		<!-- 左翻页按钮 -->
		<div class="page-button left-button" id="leftButton" style="display: none;">
			<img src="./img/left.svg" alt="上一页" class="w-full h-full object-contain">
		</div>

		<!-- 右翻页按钮 -->
		<div class="page-button right-button" id="rightButton">
			<img src="./img/left.svg" alt="下一页" class="w-full h-full object-contain">
		</div>

		<!-- Swiper 滑动容器 -->
		<swiper-container 
			class="swiper-container"
			direction="horizontal"
			slides-per-view="1"
			speed="500"
			touch-ratio="1"
			touch-angle="45"
			threshold="5"
			space-between="0"
			loop="false"
			navigation="false"
			pagination="false"
			scrollbar="false">
			
			<!-- 第一页 -->
			<swiper-slide>
				<!-- 首页标题 -->
				<div class="home-title">
					RapidArc Dynamic<br/>
					“术”中双旋调强放疗技术
				</div>

				<!-- 视频 -->
				<div class="center-video">
					<video controls class="product-video" muted playsinline>
						<source src="./data/见证科技力量/RapidArc Dynamic 术中双旋调强放疗技术.mp4" type="video/mp4">
						浏览器不支持视频播放。
					</video>
					<!-- 播放按钮 -->
					<img src="./img/play.svg" alt="播放" class="play-button" data-video-index="0">
				</div>
			</swiper-slide>

			<!-- 第二页 -->
			<swiper-slide>
				<!-- 首页标题 -->
				<div class="home-title">
					HyperArc<br/>
					头部放射外科治疗系统
				</div>

				<!-- 视频 -->
				<div class="center-video">
					<video controls class="product-video" muted playsinline>
						<source src="./data/见证科技力量/HyperArc 头部放射外科治疗系统.mp4" type="video/mp4">
						浏览器不支持视频播放。
					</video>
					<!-- 播放按钮 -->
					<img src="./img/play.svg" alt="播放" class="play-button" data-video-index="1">
				</div>
			</swiper-slide>

			<!-- 第三页 -->
			<swiper-slide>
				<!-- 首页标题 -->
				<div class="home-title">
					RapidArc Dynamic<br/>
					“术”中双旋调强放疗技术
				</div>

				<!-- 视频 -->
				<div class="center-video">
					<video controls class="product-video" muted playsinline>
						<source src="./data/见证科技力量/RapidArc Dynamic 术中双旋调强放疗技术2.mp4" type="video/mp4">
						浏览器不支持视频播放。
					</video>
					<!-- 播放按钮 -->
					<img src="./img/play.svg" alt="播放" class="play-button" data-video-index="2">
				</div>
			</swiper-slide>

			<!-- 第四页 -->
			<swiper-slide>
				<!-- 首页标题 -->
				<div class="home-title">
					TrueBeam<br/>
					立体定向放射治疗旗舰平台
				</div>

				<!-- 视频 -->
				<div class="center-video">
					<video controls class="product-video" muted playsinline>
						<source src="./data/见证科技力量/TrueBeam 立体定向放射治疗旗舰平台.mp4" type="video/mp4">
						浏览器不支持视频播放。
					</video>
					<!-- 播放按钮 -->
					<img src="./img/play.svg" alt="播放" class="play-button" data-video-index="3">
				</div>
			</swiper-slide>

		</swiper-container>

	</div>

	<script src="./js/jquery-1.8.3.min.js"></script>
	<script>
		// 视频播放控制逻辑
		document.addEventListener('DOMContentLoaded', function() {
			// 获取所有的视频元素和播放按钮
			const videos = document.querySelectorAll('.product-video');
			const playButtons = document.querySelectorAll('.play-button');
			
			// 获取Swiper实例和翻页按钮
			const swiperContainer = document.querySelector('swiper-container');
			const leftButton = document.getElementById('leftButton');
			const rightButton = document.getElementById('rightButton');
			
			// 初始化当前页码和总页数
			let currentPage = 0;
			const totalPages = document.querySelectorAll('swiper-slide').length;
			
			// 确保Swiper已初始化
			if (!swiperContainer.swiper) {
				// 如果Swiper未初始化，则手动初始化
				swiperContainer.initialize();
			}
			
			// 更新翻页按钮状态
			function updatePageButtons() {
				if (totalPages <= 1) {
					leftButton.style.display = 'none';
					rightButton.style.display = 'none';
				} else {
					if (currentPage === 0) {
						leftButton.style.display = 'none';
						rightButton.style.display = 'block';
					} else if (currentPage === totalPages - 1) {
						leftButton.style.display = 'block';
						rightButton.style.display = 'none';
					} else {
						leftButton.style.display = 'block';
						rightButton.style.display = 'block';
					}
				}
			}
			
			function pauseAllVideos() {
				videos.forEach(video => {
					video.pause();
				});
				// 显示所有播放按钮
				playButtons.forEach(button => {
					button.style.display = 'block';
				});
			}

			// 播放当前页面的视频
			function playVideoOnCurrentPage() {
				const currentSlide = swiperContainer.swiper.slides[currentPage];
				if (currentSlide) {
					const currentVideo = currentSlide.querySelector('.product-video');
					if (currentVideo) {
						// 延迟播放，等待页面切换动画完成
						setTimeout(() => {
							currentVideo.play().then(() => {
								// 播放成功后隐藏播放按钮
								const button = currentSlide.querySelector('.play-button');
								if (button) {
									button.style.display = 'none';
								}
							}).catch(error => {
								console.log('自动播放失败，可能需要用户交互:', error);
							});
						}, 600); // 600ms延迟，确保切换动画完成
					}
				}
			}
			
			// 翻页函数
			function goToPage(pageIndex) {
				if (pageIndex < 0 || pageIndex >= totalPages) return;
				currentPage = pageIndex;
				pauseAllVideos();
				swiperContainer.swiper.slideTo(currentPage, 500); // 500ms的过渡时间
				updatePageButtons();
				// 自动播放当前页面的视频
				playVideoOnCurrentPage();
			}
			
			// 为翻页按钮添加点击事件
			leftButton.addEventListener('click', () => goToPage(currentPage - 1));
			rightButton.addEventListener('click', () => goToPage(currentPage + 1));
			
			// 监听Swiper页面切换事件，更新当前页码和按钮状态
			swiperContainer.addEventListener('swipertransitionstart', function() {
				pauseAllVideos();
			});
			
			// 监听slidechange事件更新当前页码
			swiperContainer.addEventListener('swiperslidechange', function(e) {
				const swiperInstance = e.detail && e.detail[0] ? e.detail[0] : swiperContainer.swiper;
				if (swiperInstance && swiperInstance.activeIndex !== undefined) {
					currentPage = swiperInstance.activeIndex;
					updatePageButtons();
				}
				pauseAllVideos();
				// 自动播放当前页面的视频
				playVideoOnCurrentPage();
			});
			
			// 初始化按钮状态
			updatePageButtons();

			// 页面加载完成后自动播放第一个视频
			setTimeout(() => {
				playVideoOnCurrentPage();
			}, 1000); // 延迟1秒，确保页面完全加载
			
			// 为每个视频和播放按钮建立关联
			videos.forEach((video, index) => {
				// 获取对应的播放按钮
				const playButton = document.querySelector(`.play-button[data-video-index="${index}"]`);
				
				if (playButton) {
					// 点击播放按钮时播放视频并隐藏按钮
					playButton.addEventListener('click', function() {
						video.play();
					});
					
					// 监听视频播放事件，隐藏播放按钮
					video.addEventListener('play', function() {
						const button = document.querySelector(`.play-button[data-video-index="${index}"]`);
						if (button) {
							button.style.display = 'none';
						}
					});
					
					// 视频暂停时显示播放按钮
					video.addEventListener('pause', function() {
						const button = document.querySelector(`.play-button[data-video-index="${index}"]`);
						if (button) {
							button.style.display = 'block';
						}
					});
					
					// 视频结束时显示播放按钮
					video.addEventListener('ended', function() {
						const button = document.querySelector(`.play-button[data-video-index="${index}"]`);
						if (button) {
							button.style.display = 'block';
						}
					});
				}
			});
			
		});
	</script>
</body>

</html>