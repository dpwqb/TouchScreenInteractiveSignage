<!DOCTYPE html>
<html lang="zh-CN">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<title>触屏展示台子页面</title>
	<script src="./js/tailwindcss.js"></script>
	<!-- 引入自定义字体 -->
	<style>
		@font-face {
			font-family: 'SHBreeHeadlineGlobal';
			src: url('./Fonts/sh-bree-headlineglobal-regular.ttf') format('truetype');
		}
	</style>
	<script>
		tailwind.config = {
			theme: {
				extend: {
					colors: {
						primary: '#4a6fa5',
						secondary: '#e67e22',
					}
				}
			}
		}
	</script>
	<style type="text/tailwindcss">
		@layer utilities {
      .page-container {
        position: relative;
        width: 100%;
        height: 100vh;
        overflow: hidden;
        touch-action: none; /* 防止浏览器默认滚动干扰 */
      }
      .bg-image {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-size: cover;
        background-position: center;
        z-index: -1;
      }
      .nav-button {
        position: absolute;
        z-index: 10;
        cursor: pointer;
        opacity: 0.9;
        transition: opacity 0.1s;
      }
	  .logo {
		  right:50px;
		  top: 50px;
		  width: clamp(128px, 16vw, 512px);
		  height: auto;
	  }
      .nav-button:hover {
        opacity: 1;
      }
      .back-button {
        right:50px;
        bottom: 50px;
		width: clamp(64px, 20vw, 256px);
        height: clamp(64px, 20vw, 256px);
        top: 85%;
      }
      .page-button {
        position: absolute;
        width: clamp(32px, 6vw, 150px);
        height: clamp(32px, 6vw, 150px);
        top: 50%;
        transform: translateY(-50%);
        z-index: 10;
        cursor: pointer;
        opacity: 0.8;
        transition: opacity 0.3s;
      }
      .page-button:hover {
        opacity: 1;
      }
      .left-button {
        left: 20px;
      }
      .right-button {
        right: 20px;
      }
      .right-button img {
        transform: scaleX(-1);
      }
      .content-container {
        position: absolute;
        top: 100px;
        left: 0;
        /* width: 100%; */
		min-width: 100dvw;
		max-width: 100dvw;
        bottom: 40px;
        overflow: hidden;
        touch-action: pan-y;
      }
      .content-wrapper {
        position: absolute;
        top: 0;
        left: 0;
        height: 100%;
        display: flex;
        transition: transform 0.5s ease;
      }
      .svg-container {
		min-width: 100dvw;
		max-width: 100dvw;
        flex: 0 0 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        /* padding: 40px; */
        box-sizing: border-box;
        overflow: hidden; /* 防止内容溢出 */
        position: relative; /* 为内部绝对定位提供参考 */
      }
      .content-inner-wrapper {
        width: 100%;
        height: 100%;
        /* padding: 20px; */
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
      }
      .page-title {
        font-family: 'SHBreeHeadlineGlobal', sans-serif;
        font-size: clamp(2rem, 4vw, 5rem); /* 响应式字体大小 */
        font-weight: bold;
        color: #EC6600;
		padding: 50px 32px 0 32px;
        width: 100%;
        max-width: 100%;
        /* text-align: center; */
        word-wrap: break-word; /* 长文本自动换行 */
        overflow-wrap: break-word;
        margin-bottom: 10px;
        box-sizing: border-box;
      }
      .page-subtitle {
        font-size: clamp(1.2rem, 2.5vw, 3rem); /* 响应式字体大小 */
        color: white;
        width: 100%;
        max-width: 100%;
		padding: 0 32px;
        word-wrap: break-word; /* 长文本自动换行 */
        overflow-wrap: break-word;
        margin-bottom: 50px;
        box-sizing: border-box;
      }
      .media-wrapper,
      .svg-wrapper {
        width: 100%;
		/* margin: 10px; */
        flex: 1 1 auto;
        display: flex;
        justify-content: center;
        align-items: center;
        box-sizing: border-box;
        overflow: hidden;
      }
      .media-content,
      .svg-content {
        width: 100%;
        height: auto;
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
        pointer-events: none;
        box-sizing: border-box;
      }
      .media-content.media-content-video {
        height: 100%;
      }
      .media-fallback {
        width: 100%;
        color: white;
        font-size: clamp(1rem, 2vw, 2.5rem);
        text-align: center;
      }
      .page-indicator {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 10px;
        z-index: 10;
      }
      .indicator-dot {
        width: 10px;
        height: 10px;
        border-radius: 50%;
        background-color: rgba(255, 255, 255, 0.5);
        transition: background-color 0.3s;
      }
      .indicator-dot.active {
        background-color: white;
      }

      /* 滚动文字样式（优化滚动区域和文字密度） */
      .scrolling-text-container {
        position: absolute;
        left: 15vw;
        top: 51%;
        transform: translateY(-50%);
        width: clamp(150px, 15vw, 250px);
        height: 22.5vh;
        overflow: hidden;
        padding: 10px 0;
        box-sizing: border-box;
      }
      .scrolling-text-wrapper {
        position: relative;
        width: 100%;
        transition: top 0.1s linear;
      }
      .scrolling-text {
        font-family: 'SHBreeHeadlineGlobal', sans-serif;
        font-size: clamp(1rem, 2vw, 4rem);
        color: white;
        line-height: 2.9;
        text-align: center;
        margin: 0;
      }
		/* 特殊视频样式 - 基础样式（共用部分） */
		.special-video-wrapper {
			position: absolute;
			left: 50%;
			transform: translate(-50%, -50%);
			z-index: 15;
			display: flex;
			justify-content: center;
			align-items: center;
		}
		.special-video {
			width: 100%;
			height: 100%;
			object-fit: contain;
		}
		/* 特殊视频样式 - 探索创新方案第3页（不同部分） */
		.special-video-wrapper-17 {
			top: 71%;
			width: 40svw;
		}
      /* 响应式媒体查询 */
      @media (max-width: 768px) {
        .content-inner-wrapper {
          padding: 15px;
        }
        .page-title {
          font-size: clamp(1.5rem, 3vw, 3rem);
        }
        .page-subtitle {
          font-size: clamp(1rem, 2vw, 2rem);
        }
      }
      
      @media (max-width: 480px) {
        .content-container {
          padding: 10px;
        }
        .svg-container {
          padding: 10px;
        }
        .content-inner-wrapper {
          padding: 10px;
        }
        .page-title {
          font-size: clamp(1.2rem, 2.5vw, 2.5rem);
        }
        .page-subtitle {
          font-size: clamp(0.9rem, 1.8vw, 1.8rem);
        }
      }
    }

    /* 为超清影像页面的特殊视频启用点击事件 */
    #ethosVideo1, #ethosVideo2, #ethosVideo3, #ethosVideo4 {
      pointer-events: auto !important;
    }

    /* 超清影像第2页 - 第一排第一个视频（头颈HyperSight） */
    .special-video-wrapper-ethos-1 {
      position: absolute;
      top: 29%;
      left: 20.5%;
      width: 26vw;
	  height: 20vw;
      z-index: 15;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* 超清影像第2页 - 第一排第二个视频（头颈CT影像） */
    .special-video-wrapper-ethos-2 {
      position: absolute;
      top: 29%;
      right: 19.5%;
      width: 26vw;
	  height: 20vw;
      z-index: 15;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* 超清影像第2页 - 第二排第一个视频（胸部Hipersight） */
    .special-video-wrapper-ethos-3 {
      position: absolute;
      top: 58%;
      left: 20%;
      width: 26vw;
	  height: 20vw;
      z-index: 15;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* 超清影像第2页 - 第二排第二个视频（胸部CT影像） */
    .special-video-wrapper-ethos-4 {
      position: absolute;
      top: 58%;
      right: 18.5%;
      width: 26vw;
	  height: 20vw;
      z-index: 15;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  </style>
</head>

<body class="bg-black">
	<div class="page-container">
		<!-- 背景图片 -->
		<div class="bg-image" style="background-image: url('./img/bg/bg.jpg')"></div>

		<!-- 返回按钮 -->
		<div class="nav-button back-button" onclick="getReturnUrl()">
			<img src="./img/back.svg" alt="返回首页" class="w-full h-full object-contain">
		</div>

		<!-- Logo -->
		<div class="nav-button logo">
			<img src="./img/logo.svg" alt="Logo" class="w-full h-full object-contain">
		</div>

		<!-- 左翻页按钮 -->
		<div class="page-button left-button" id="leftButton">
			<img src="./img/left.svg" alt="上一页" class="w-full h-full object-contain">
		</div>

		<!-- 右翻页按钮 -->
		<div class="page-button right-button" id="rightButton">
			<img src="./img/left.svg" alt="下一页" class="w-full h-full object-contain">
		</div>

		<!-- 内容容器 -->
		<div class="content-container">
			<div class="content-wrapper" id="contentWrapper">
				<!-- 内容由JS加载 -->
			</div>
		</div>

		<!-- 页码指示器 -->
		<div class="page-indicator" id="pageIndicator"></div>
	</div>

	<script src="./js/jquery-1.8.3.min.js"></script>
	<script src="./js/idleRedirect.js"></script>
	<script>
		$(document).ready(function () {
			let pageData = [];
			let currentPage = 0;
			let totalPages = 0;
			let pageType = '';
			let fromPage = '';

			init();

			function init() {
				const urlParams = new URLSearchParams(window.location.search);
				const pageParam = urlParams.get('page');
				pageType = urlParams.get('type') || ''; // 获取页面参数
				fromPage = urlParams.get('from') || ''; // 获取来源页面参数
				currentPage = pageParam ? parseInt(pageParam) - 1 : 0;
				loadPageData();
			}

			function loadPageData() {
				$.getJSON('./data.json', function (data) {
					// 检查页面类型是否存在
					if (pageType && data.hasOwnProperty(pageType)) {
						pageData = data[pageType];
						totalPages = pageData.length;
						if (currentPage < 0) currentPage = 0;
						if (currentPage >= totalPages) currentPage = totalPages - 1;
						renderPageContent();
						renderPageIndicator();
						bindEvents();
						updatePageButtons(); // 初始化时更新按钮显示状态
					} else {
						// 如果页面类型不存在，弹出提示并返回到首页
						alert('访问的页面不存在！');
						window.location.href = './index.html';
					}
				}).fail(() => {
					console.error('加载页面数据失败');
					alert('加载页面数据失败！');
					window.location.href = './index.html';
				});
			}

			function renderPageContent() {
				const contentWrapper = $('#contentWrapper');
				contentWrapper.empty();
				pageData.forEach((page, index) => {
					const svgContainer = $('<div class="svg-container"></div>');

					// 创建内容内部包装器
					const contentInnerWrapper = $('<div class="content-inner-wrapper"></div>');

					// 添加标题元素
					if (page.title) {
						const titleElement = $('<div class="page-title"></div>');
						titleElement.html(page.title);
						contentInnerWrapper.append(titleElement);
					}

					// 添加副标题元素
					if (page.subtitle) {
						const subtitleElement = $('<div class="page-subtitle"></div>');
						subtitleElement.html(page.subtitle);
						contentInnerWrapper.append(subtitleElement);
					}

					// 滚动逻辑
					if (pageType === "临床应用汇总" && index === 0) {
						const scrollContainer = $('<div class="scrolling-text-container"></div>');
						const scrollWrapper = $('<div class="scrolling-text-wrapper"></div>');

						// 完整文字内容）
						const bodyParts = `
                            <div class="scrolling-text">
                                面部<br>
                                眼眶<br>
                                脊柱-腰椎<br>
                                其他胸腔部位<br>
                                颅骨<br>
                                锁骨上窝<br>
                                脊柱-颈椎<br>
                                腿部<br>
                                大腿<br>
                                锁骨<br>
                                胆囊<br>
                                足<br>
                                肛门<br>
                                腋窝<br>
                                肝<br>
                                胸壁<br>
                                脾<br>
                                脊柱-骶骨<br>
                                食管<br>
                                肋骨<br>
                                唾液腺<br>
                                鼻窦<br>
                                食管下段<br>
                                其他身体部位<br>
                                鼻咽<br>
                                口咽<br>
                                肾上腺<br>
                                纵隔<br>
                                胰腺<br>
                                口腔<br>
                                脑部<br>
                                阴道<br>
                                主动脉旁<br>
                                脊柱-胸椎<br>
                                骨盆<br>
                                胃<br>
                                前列腺<br>
                                膀胱<br>
                                其他腹部部位<br>
                                直肠<br>
                                宫颈<br>
                                其他骨盆部位<br>
                                肺部<br>
                                外阴<br>
                                喉部<br>
                                子宫<br>
                                乳腺<br>
                                其他头颈部部位<br>
                                腹膜后间隙<br>
                                脊柱-腰椎<br>
                                其他胸腔部位<br>
                                颅骨<br>
                                锁骨上窝<br>
                                脊柱-颈椎<br>
                            </div>
                        `;

						scrollWrapper.html(bodyParts);
						scrollWrapper.append($(bodyParts).clone());
						scrollContainer.append(scrollWrapper);
						svgContainer.append(scrollContainer);

						// 启动滚动动画
						setTimeout(() => {
							animateScroll(scrollWrapper);
						}, 100); // 延迟启动，确保DOM渲染完成
					}
					// 创建SVG包装器
					const mediaWrapper = $('<div class="media-wrapper"></div>');
					const mediaElement = createMediaElement(page.URL);
					mediaWrapper.append(mediaElement);
					contentInnerWrapper.append(mediaWrapper);

					// 为"Ethos治疗宫颈癌"第2页（索引1，page=2）添加特殊视频
					if (pageType === 'Ethos治疗宫颈癌' && index === 1) {
						const specialVideoWrapper = $('<div class="special-video-wrapper special-video-wrapper-17"></div>');
						const specialVideo = $('<video class="media-content media-content-video special-video" muted playsinline loop autoplay></video>');
						specialVideo.attr('src', './data/典型病例库/4.2/20251030-互动屏-Ethos-内容_17.mp4');
						specialVideoWrapper.append(specialVideo);
						svgContainer.append(specialVideoWrapper);
					}

					// 为"超清影像"第2页（索引1，page=2）添加4个视频展示
					if (pageType === '超清影像' && index === 1) {
						// 第一排第一个视频（头颈HyperSight）
						const videoWrapper1 = $('<div class="special-video-wrapper special-video-wrapper-ethos-1"></div>');
						const video1 = $('<video id="ethosVideo1" class="media-content media-content-video special-video" muted playsinline loop autoplay></video>');
						video1.attr('src', './data/Ethos HyperSight视频替换/头颈/头颈HyperSight.mp4');
						videoWrapper1.append(video1);
						svgContainer.append(videoWrapper1);

						// 第一排第二个视频（头颈CT影像）
						const videoWrapper2 = $('<div class="special-video-wrapper special-video-wrapper-ethos-2"></div>');
						const video2 = $('<video id="ethosVideo2" class="media-content media-content-video special-video" muted playsinline loop autoplay></video>');
						video2.attr('src', './data/Ethos HyperSight视频替换/头颈/CT影像.mp4');
						videoWrapper2.append(video2);
						svgContainer.append(videoWrapper2);

						// 第二排第一个视频（胸部Hipersight）
						const videoWrapper3 = $('<div class="special-video-wrapper special-video-wrapper-ethos-3"></div>');
						const video3 = $('<video id="ethosVideo3" class="media-content media-content-video special-video" muted playsinline loop autoplay></video>');
						video3.attr('src', './data/Ethos HyperSight视频替换/胸部/Hipersight.mp4');
						videoWrapper3.append(video3);
						svgContainer.append(videoWrapper3);

						// 第二排第二个视频（胸部CT影像）
						const videoWrapper4 = $('<div class="special-video-wrapper special-video-wrapper-ethos-4"></div>');
						const video4 = $('<video id="ethosVideo4" class="media-content media-content-video special-video" muted playsinline loop autoplay></video>');
						video4.attr('src', './data/Ethos HyperSight视频替换/胸部/CT影像.mp4');
						videoWrapper4.append(video4);
						svgContainer.append(videoWrapper4);
					}

					// 为"超清影像"第3页（索引1，page=3）添加4个视频展示
					if (pageType === '超清影像' && index === 2) {
						// 第一排第一个视频
						const videoWrapper1 = $('<div class="special-video-wrapper special-video-wrapper-ethos-1"></div>');
						const video1 = $('<video id="ethosVideo1" class="media-content media-content-video special-video" muted playsinline loop autoplay></video>');
						video1.attr('src', './data/Ethos HyperSight视频替换/腹部/HyperSight.mp4');
						videoWrapper1.append(video1);
						svgContainer.append(videoWrapper1);

						// 第一排第二个视频
						const videoWrapper2 = $('<div class="special-video-wrapper special-video-wrapper-ethos-2"></div>');
						const video2 = $('<video id="ethosVideo2" class="media-content media-content-video special-video" muted playsinline loop autoplay></video>');
						video2.attr('src', './data/Ethos HyperSight视频替换/腹部/CT影像.mp4');
						videoWrapper2.append(video2);
						svgContainer.append(videoWrapper2);

						// 第二排第一个视频
						const videoWrapper3 = $('<div class="special-video-wrapper special-video-wrapper-ethos-3"></div>');
						const video3 = $('<video id="ethosVideo3" class="media-content media-content-video special-video" muted playsinline loop autoplay></video>');
						video3.attr('src', './data/Ethos HyperSight视频替换/盆腔/Hipersight.mp4');
						videoWrapper3.append(video3);
						svgContainer.append(videoWrapper3);

						// 第二排第二个视频
						const videoWrapper4 = $('<div class="special-video-wrapper special-video-wrapper-ethos-4"></div>');
						const video4 = $('<video id="ethosVideo4" class="media-content media-content-video special-video" muted playsinline loop autoplay></video>');
						video4.attr('src', './data/Ethos HyperSight视频替换/盆腔/CT影像.mp4');
						videoWrapper4.append(video4);
						svgContainer.append(videoWrapper4);
					}

					// 将内容内部包装器添加到容器中
					svgContainer.append(contentInnerWrapper);
					contentWrapper.append(svgContainer);
				});
				updateContentPosition();
				handleMediaPlayback();

				// 为特定页面添加点击事件
				addClickHandlerForSpecialPage();
			}

			// 为特定页面添加点击处理函数
			function addClickHandlerForSpecialPage() {
				// 检查是否为特定页面（MR-ART宫颈癌放疗新范式 第一页）
				if (pageType === 'MR-ART宫颈癌放疗新范式' && currentPage === 0) {
					console.log('检测到特定页面，添加点击事件');

					// 获取当前显示的svg容器
					const currentContainer = $('.svg-container').eq(currentPage);

					// 为该容器内的图片添加点击事件（仅限 img，避免影响视频/对象）
					const images = currentContainer.find('img.media-content');
					console.log('找到', images.length, '张图片');

					images.each(function (index) {
						const img = $(this);

						// 启用鼠标事件（覆盖 pointer-events: none）
						img.css('pointer-events', 'auto');

						// 添加鼠标样式
						img.css('cursor', 'pointer');

						// 移除已存在的事件处理器
						img.off('click.special');

						// 添加新的点击事件处理器（直接替换图片 src）
						img.on('click.special', function (e) {
							console.log('图片被点击，直接替换为指定图片');
							e.preventDefault();
							e.stopPropagation();
							img.attr('src', './data/智慧影像赋能/5.1/20251030-互动屏-Ethos-内容_21.png');
							// 替换后移除本次点击绑定，避免重复处理
							img.off('click.special');
						});
					});
				}
			}

			function renderPageIndicator() {
				const pageIndicator = $('#pageIndicator');
				pageIndicator.empty();
				for (let i = 0; i < totalPages; i++) {
					const dot = $('<div class="indicator-dot"></div>');
					if (i === currentPage) dot.addClass('active');
					pageIndicator.append(dot);
				}
			}

			function bindEvents() {
				$('#leftButton').on('click', () => goToPage(currentPage - 1));
				$('#rightButton').on('click', () => goToPage(currentPage + 1));

				const touchArea = document.querySelector('.page-container');
				let startX = 0;
				let endX = 0;
				const threshold = 50;

				touchArea.addEventListener('touchstart', (e) => {
					if (e.touches.length > 0) {
						startX = e.touches[0].clientX;
					}
					endX = startX;
				}, { passive: true });

				touchArea.addEventListener('touchmove', (e) => {
					if (e.touches.length > 0) {
						endX = e.touches[0].clientX;
					}
					e.preventDefault();
				}, { passive: false });

				touchArea.addEventListener('touchend', () => {
					const diffX = startX - endX;
					if (Math.abs(diffX) > threshold) {
						if (diffX > 0) {
							goToPage(currentPage + 1);
						} else {
							goToPage(currentPage - 1);
						}
					}
				});

				$(window).on('resize', updateContentPosition);
			}

			function goToPage(pageIndex) {
				if (pageIndex < 0 || pageIndex >= totalPages) return;
				currentPage = pageIndex;
				const url = new URL(window.location.href);
				url.searchParams.set('page', currentPage + 1);
				url.searchParams.set('type', pageType); // 保持页面类型参数
				if (fromPage) {
					url.searchParams.set('from', fromPage); // 保持来源页面参数
				}
				window.history.pushState({}, '', url);
				updateContentPosition();
				updatePageIndicator();
				updatePageButtons(); // 翻页后更新按钮状态

				// 切换页面后重新检查并添加点击事件
				addClickHandlerForSpecialPage();
			}

			function updateContentPosition() {
				const containerWidth = $('.content-container').width();
				$('#contentWrapper').css('transform', `translateX(${-currentPage * containerWidth}px)`);
				handleMediaPlayback();
			}

			function updatePageIndicator() {
				$('.indicator-dot').removeClass('active').eq(currentPage).addClass('active');
			}

			// 根据页码控制翻页按钮显示/隐藏
			function updatePageButtons() {
				const leftBtn = $('#leftButton');
				const rightBtn = $('#rightButton');

				if (totalPages <= 1) {
					leftBtn.hide();
					rightBtn.hide();
				} else {
					if (currentPage === 0) {
						leftBtn.fadeOut(200);
						rightBtn.fadeIn(200);
					} else if (currentPage === totalPages - 1) {
						rightBtn.fadeOut(200);
						leftBtn.fadeIn(200);
					} else {
						leftBtn.fadeIn(200);
						rightBtn.fadeIn(200);
					}
				}
			}

			function createMediaElement(url = '') {
				const safeUrl = url || '';
				const urlWithoutQuery = safeUrl.split('?')[0];
				const urlSegments = urlWithoutQuery.split('.');
				const extension = urlSegments.length > 1 ? urlSegments.pop().toLowerCase() : '';
				const imageTypes = ['png', 'jpg', 'jpeg', 'gif', 'bmp', 'webp', 'avif'];
				const videoTypes = ['mp4', 'webm', 'ogg', 'mov'];

				if (extension === 'svg') {
					const objectElement = $('<object class="media-content media-content-object" type="image/svg+xml"></object>');
					objectElement.attr('data', safeUrl);
					return objectElement;
				}

				if (imageTypes.includes(extension)) {
					const imageElement = $('<img class="media-content" alt="" draggable="false" />');
					imageElement.attr('src', safeUrl);
					return imageElement;
				}

				if (videoTypes.includes(extension)) {
					const videoElement = $('<video class="media-content media-content-video" muted playsinline loop></video>');
					videoElement.attr('src', safeUrl);
					videoElement.attr('autoplay', 'autoplay');
					return videoElement;
				}

				const fallbackElement = $('<div class="media-fallback"></div>');
				fallbackElement.text('暂不支持的媒体格式');
				return fallbackElement;
			}

			function handleMediaPlayback() {
				$('.svg-container').each(function (index) {
					const isActive = index === currentPage;
					$(this).find('.media-content-video').each(function () {
						const video = this;
						if (isActive) {
							// 当前页面的视频自动播放
							const playMethod = video.play;
							if (typeof playMethod === 'function') {
								const playPromise = playMethod.call(video);
								if (typeof playPromise === 'object' && typeof playPromise.then === 'function') {
									playPromise.catch(function () { });
								}
							}
						} else {
							// 非当前页面视频暂停并重置
							const pauseMethod = video.pause;
							if (typeof pauseMethod === 'function') {
								pauseMethod.call(video);
							}
							video.currentTime = 0;
						}
					});
				});
			}

			// 无跳跃连续循环动画
			function animateScroll(wrapper) {
				const speed = 25;
				let position = 0;
				const singleContentHeight = wrapper.find('.scrolling-text').first().outerHeight();
				const totalContentHeight = singleContentHeight * 2;

				function scroll() {
					position++;
					if (position >= singleContentHeight) {

						position = 0;
						wrapper.css('transition', 'none').css('top', `-${position}px`);
						requestAnimationFrame(() => {
							wrapper.css('transition', 'top 0.1s linear');
						});
					} else {
						// 正常滚动
						wrapper.css('top', `-${position}px`);
					}
					requestAnimationFrame(scroll);
				}

				scroll();
			}
		});

		// 返回上一页的函数
		function getReturnUrl() {
			const urlParams = new URLSearchParams(window.location.search);
			const from = urlParams.get('from');
			// 如果有来源参数，直接拼接到返回路径；否则返回首页
			// window.location.href = `./${from?from:'index'}.html`;
			window.location.href = `./index.html`;
		}
	</script>

</body>

</html>